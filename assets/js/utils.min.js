export function parseBool(e){if("boolean"==typeof e)return e;if(null==e)return null;const t=String(e).trim().toLowerCase();return["true","1","sí","si","x"].includes(t)}export function parseNum(e){if(""===e||null==e)return null;const t=Number(e);return Number.isFinite(t)?t:null}export function splitList(e){return e?Array.isArray(e)?e:String(e).split(/[;,|]/).map(e=>e.trim()).filter(Boolean):[]}export function download(e,t,r){const o=new Blob([t],{type:r}),n=URL.createObjectURL(o),i=Object.assign(document.createElement("a"),{href:n,download:download});document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(n)}export function computeEstatus(e){if(e.estatus)return e.estatus;const t=parseBool(e.tiene_ruc),r=parseBool(e.tiene_patente),o=parseBool(e.escritura_publica),n=parseBool(e.registro_mercantil),i=(e.instalacion||"").toLowerCase();return t&&r&&(o||n)?"formal":t||r||"móvil"!==i&&"movil"!==i&&"ambulante"!==i?"informal":"irregular"}export function colorByStatus(e){return"formal"===e?"#2563eb":"informal"===e?"#f59e0b":"#ef4444"}export function normalize(e){return"string"!=typeof e?e:e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}export function pointInPolygon(e,t){const r=e[0],o=e[1];let n=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){const l=t[e][0],u=t[e][1],a=t[i][0],s=t[i][1];u>o!=s>o&&r<(a-l)*(o-u)/(s-u+1e-9)+l&&(n=!n)}return n}export function parseCoordsText(e){if(!e)return null;const t=e.split(/;|\n/).map(e=>e.trim()).filter(Boolean),r=[];for(const e of t){const[t,o]=e.split(",").map(e=>parseFloat(e.trim()));Number.isFinite(t)&&Number.isFinite(o)&&r.push([t,o])}return r}